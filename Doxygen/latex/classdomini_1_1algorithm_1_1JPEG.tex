\hypertarget{classdomini_1_1algorithm_1_1JPEG}{}\section{domini.\+algorithm.\+J\+P\+EG Class Reference}
\label{classdomini_1_1algorithm_1_1JPEG}\index{domini.\+algorithm.\+J\+P\+EG@{domini.\+algorithm.\+J\+P\+EG}}


Compressió i descompressió pel mètode \hyperlink{classdomini_1_1algorithm_1_1JPEG}{J\+P\+EG}.  




Inheritance diagram for domini.\+algorithm.\+J\+P\+EG\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=212pt]{classdomini_1_1algorithm_1_1JPEG__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for domini.\+algorithm.\+J\+P\+EG\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classdomini_1_1algorithm_1_1JPEG__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classdomini_1_1algorithm_1_1JPEG_ac489916de8505f11b6e29c7206baf3c7}{J\+P\+EG} (String path, boolean b)
\begin{DoxyCompactList}\small\item\em Constructor de la classe. \end{DoxyCompactList}\item 
\hyperlink{classdomini_1_1algorithm_1_1JPEG_ade39a15f3c5722b4975746fcee6ad364}{J\+P\+EG} (boolean b)
\begin{DoxyCompactList}\small\item\em Constructor de la classe. \end{DoxyCompactList}\item 
void \hyperlink{classdomini_1_1algorithm_1_1JPEG_a860d6166ef8edc40b0ffb61942589e5d}{reset\+Quality} (int q)
\begin{DoxyCompactList}\small\item\em Construeix la matriu de quantització a partir de la qualitat. \end{DoxyCompactList}\item 
void \hyperlink{classdomini_1_1algorithm_1_1JPEG_a753bf49f2c8bde9e54464b21a1bcb2d8}{Compressor} ()
\begin{DoxyCompactList}\small\item\em Comprimim una imatge amb l\textquotesingle{}algoritme \hyperlink{classdomini_1_1algorithm_1_1JPEG}{J\+P\+EG}. \end{DoxyCompactList}\item 
void \hyperlink{classdomini_1_1algorithm_1_1JPEG_accca347e84e41b254d1f4a7bbdf2201a}{Decompressor} ()
\begin{DoxyCompactList}\small\item\em Desomprimim una imatge amb l\textquotesingle{}algoritme \hyperlink{classdomini_1_1algorithm_1_1JPEG}{J\+P\+EG}. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Package Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classHuffman}{Huffman} \hyperlink{classdomini_1_1algorithm_1_1JPEG_aacc6445baa7819e3f9139ffb78e0b8f4}{huff}
\end{DoxyCompactItemize}
\subsection*{Static Private Member Functions}
\begin{DoxyCompactItemize}
\item 
static int \hyperlink{classdomini_1_1algorithm_1_1JPEG_aa9c52789d61d5eebdeb13ee39f8e817d}{round} (double x)
\begin{DoxyCompactList}\small\item\em Arrodoneix un número real. \end{DoxyCompactList}\item 
static double \hyperlink{classdomini_1_1algorithm_1_1JPEG_af86bdbb6b6f5671abff6bc6bd5f6349d}{force255} (double x)
\begin{DoxyCompactList}\small\item\em és la funcí alfa de D\+CT. \end{DoxyCompactList}\item 
static double \hyperlink{classdomini_1_1algorithm_1_1JPEG_a058b0ee7eb44bbaec4078b5fc32c5107}{alpha} (int x)
\item 
static void \hyperlink{classdomini_1_1algorithm_1_1JPEG_a367e6d1e6543bf3d8c847aae36f4b6bf}{discrete\+\_\+cosine\+\_\+transform} (double\mbox{[}$\,$\mbox{]}\mbox{[}$\,$\mbox{]} mat1)
\begin{DoxyCompactList}\small\item\em aplica discrete cosine transform (D\+CT) a una matriu 8x8 \end{DoxyCompactList}\item 
static void \hyperlink{classdomini_1_1algorithm_1_1JPEG_a3a6e16b0ee34746e4b0118ed9107bd75}{inverse\+\_\+discrete\+\_\+cosine\+\_\+transform} (double\mbox{[}$\,$\mbox{]}\mbox{[}$\,$\mbox{]} mat1)
\begin{DoxyCompactList}\small\item\em aplica discrete cosine transform (D\+CT) inversa a una matriu 8x8 \end{DoxyCompactList}\item 
static int \hyperlink{classdomini_1_1algorithm_1_1JPEG_a0f897c6c525d81551539df1eb8db7e12}{get\+\_\+entropy1\+\_\+code} (int runlength, int size)
\begin{DoxyCompactList}\small\item\em codifica runlength i size en el simbol1 de Entropy Coding \end{DoxyCompactList}\item 
static int \hyperlink{classdomini_1_1algorithm_1_1JPEG_ac58cb434a7acfd90fc8e548fd7c00ae2}{get\+\_\+runlength\+\_\+from\+\_\+entropy1} (int code)
\begin{DoxyCompactList}\small\item\em retorna el runlength codificat en un simbol1 de Entropy Coding \end{DoxyCompactList}\item 
static int \hyperlink{classdomini_1_1algorithm_1_1JPEG_a8d1005fb7833d36a064afb1c5e15bbd3}{get\+\_\+size\+\_\+from\+\_\+entropy1} (int code)
\item 
static int \hyperlink{classdomini_1_1algorithm_1_1JPEG_aa9bc9bee7181efee254be843e23ee2c6}{get\+\_\+entropy2\+\_\+size} (int value)
\begin{DoxyCompactList}\small\item\em codifica value en el symbol2 de Entropy Coding i en retorna la mida \end{DoxyCompactList}\item 
static int \hyperlink{classdomini_1_1algorithm_1_1JPEG_a0ccbcda5311dc96a30e5cb7f2a5b95b5}{get\+\_\+entropy2\+\_\+code} (int value)
\begin{DoxyCompactList}\small\item\em retorna la codifiacació en el simbol2 de Entropy Coding d\textquotesingle{}un cert valor \end{DoxyCompactList}\item 
static int \hyperlink{classdomini_1_1algorithm_1_1JPEG_a41c69fe2e29999dd17a555859df22530}{get\+\_\+value\+\_\+from\+\_\+entropy2} (int code, int size)
\begin{DoxyCompactList}\small\item\em retorna el valor codificat en un codi d\textquotesingle{}una determinada mida \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
int \mbox{[}$\,$\mbox{]}\mbox{[}$\,$\mbox{]} \hyperlink{classdomini_1_1algorithm_1_1JPEG_a7c95eb140dbe185a31b402d48ec17a66}{quantization\+\_\+matrix} = null
\item 
int \hyperlink{classdomini_1_1algorithm_1_1JPEG_ae80176d5ff56e613643db55e21c513da}{quality}
\end{DoxyCompactItemize}
\subsection*{Static Private Attributes}
\begin{DoxyCompactItemize}
\item 
static int \mbox{[}$\,$\mbox{]} \hyperlink{classdomini_1_1algorithm_1_1JPEG_a7d3829cbffd758c087341a8da13dd2ca}{zig\+Zag\+\_\+X}
\item 
static int \mbox{[}$\,$\mbox{]} \hyperlink{classdomini_1_1algorithm_1_1JPEG_ad886d8aa00a40cb151b446534f0d1bcc}{zig\+Zag\+\_\+Y}
\item 
static int \mbox{[}$\,$\mbox{]}\mbox{[}$\,$\mbox{]} \hyperlink{classdomini_1_1algorithm_1_1JPEG_a1f91c0bad6cfd3ac22bec68bc28564c5}{base\+\_\+quantization\+\_\+matrix}
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
Compressió i descompressió pel mètode \hyperlink{classdomini_1_1algorithm_1_1JPEG}{J\+P\+EG}. 

\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classdomini_1_1algorithm_1_1JPEG_ac489916de8505f11b6e29c7206baf3c7}\label{classdomini_1_1algorithm_1_1JPEG_ac489916de8505f11b6e29c7206baf3c7}} 
\index{domini\+::algorithm\+::\+J\+P\+EG@{domini\+::algorithm\+::\+J\+P\+EG}!J\+P\+EG@{J\+P\+EG}}
\index{J\+P\+EG@{J\+P\+EG}!domini\+::algorithm\+::\+J\+P\+EG@{domini\+::algorithm\+::\+J\+P\+EG}}
\subsubsection{\texorpdfstring{J\+P\+E\+G()}{JPEG()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily domini.\+algorithm.\+J\+P\+E\+G.\+J\+P\+EG (\begin{DoxyParamCaption}\item[{String}]{path,  }\item[{boolean}]{b }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Constructor de la classe. 


\begin{DoxyParams}{Parameters}
{\em path} & Path de sortida \\
\hline
{\em b} & False si estas comprimint, True si estas descomprimint \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
29                                         \{
30         super(path, b);
31         \textcolor{keywordflow}{if} (!b) \{
32             \hyperlink{classdomini_1_1algorithm_1_1Algorithm_a4de9955411c656325adc391ef570c082}{Output}.\hyperlink{classpersistencia_1_1output_1_1Ctrl__Output_ae6d6857910a023982900ddc857b891f0}{addMetadata}(\textcolor{stringliteral}{"jpeg"});
33         \}
34         \hyperlink{classdomini_1_1algorithm_1_1JPEG_aacc6445baa7819e3f9139ffb78e0b8f4}{huff} = \textcolor{keyword}{new} \hyperlink{classHuffman}{Huffman}();
35     \}
\end{DoxyCode}
\mbox{\Hypertarget{classdomini_1_1algorithm_1_1JPEG_ade39a15f3c5722b4975746fcee6ad364}\label{classdomini_1_1algorithm_1_1JPEG_ade39a15f3c5722b4975746fcee6ad364}} 
\index{domini\+::algorithm\+::\+J\+P\+EG@{domini\+::algorithm\+::\+J\+P\+EG}!J\+P\+EG@{J\+P\+EG}}
\index{J\+P\+EG@{J\+P\+EG}!domini\+::algorithm\+::\+J\+P\+EG@{domini\+::algorithm\+::\+J\+P\+EG}}
\subsubsection{\texorpdfstring{J\+P\+E\+G()}{JPEG()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily domini.\+algorithm.\+J\+P\+E\+G.\+J\+P\+EG (\begin{DoxyParamCaption}\item[{boolean}]{b }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Constructor de la classe. 


\begin{DoxyParams}{Parameters}
{\em b} & False si estas comprimint, True si estas descomprimint \\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
Es continua escrivint al fitxer que s\textquotesingle{}estava escrivint 
\end{DoxyNote}

\begin{DoxyCode}
42                            \{
43         super(b);
44         \textcolor{keywordflow}{if} (!b) \{
45             \hyperlink{classdomini_1_1algorithm_1_1Algorithm_a4de9955411c656325adc391ef570c082}{Output}.\hyperlink{classpersistencia_1_1output_1_1Ctrl__Output_ae6d6857910a023982900ddc857b891f0}{addMetadata}(\textcolor{stringliteral}{"jpeg"});
46         \}
47         \hyperlink{classdomini_1_1algorithm_1_1JPEG_aacc6445baa7819e3f9139ffb78e0b8f4}{huff} = \textcolor{keyword}{new} \hyperlink{classHuffman}{Huffman}();
48     \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{classdomini_1_1algorithm_1_1JPEG_a058b0ee7eb44bbaec4078b5fc32c5107}\label{classdomini_1_1algorithm_1_1JPEG_a058b0ee7eb44bbaec4078b5fc32c5107}} 
\index{domini\+::algorithm\+::\+J\+P\+EG@{domini\+::algorithm\+::\+J\+P\+EG}!alpha@{alpha}}
\index{alpha@{alpha}!domini\+::algorithm\+::\+J\+P\+EG@{domini\+::algorithm\+::\+J\+P\+EG}}
\subsubsection{\texorpdfstring{alpha()}{alpha()}}
{\footnotesize\ttfamily static double domini.\+algorithm.\+J\+P\+E\+G.\+alpha (\begin{DoxyParamCaption}\item[{int}]{x }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}, {\ttfamily [private]}}


\begin{DoxyCode}
174                                        \{ \textcolor{comment}{// only used in discrete\_cosine\_transform}
175         \textcolor{keywordflow}{if} (x == 0) \textcolor{keywordflow}{return} 1.0 / Math.sqrt(2);
176         \textcolor{keywordflow}{return} 1.0;
177     \}
\end{DoxyCode}
\mbox{\Hypertarget{classdomini_1_1algorithm_1_1JPEG_a753bf49f2c8bde9e54464b21a1bcb2d8}\label{classdomini_1_1algorithm_1_1JPEG_a753bf49f2c8bde9e54464b21a1bcb2d8}} 
\index{domini\+::algorithm\+::\+J\+P\+EG@{domini\+::algorithm\+::\+J\+P\+EG}!Compressor@{Compressor}}
\index{Compressor@{Compressor}!domini\+::algorithm\+::\+J\+P\+EG@{domini\+::algorithm\+::\+J\+P\+EG}}
\subsubsection{\texorpdfstring{Compressor()}{Compressor()}}
{\footnotesize\ttfamily public void domini.\+algorithm.\+J\+P\+E\+G.\+Compressor (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Comprimim una imatge amb l\textquotesingle{}algoritme \hyperlink{classdomini_1_1algorithm_1_1JPEG}{J\+P\+EG}. 


\begin{DoxyCode}
301                              \{
302         
303 
304         \hyperlink{classdomini_1_1algorithm_1_1Algorithm_a070b7e7dcc453b03751d265beae5306c}{checkCompressor}();
305         
306         Ctrl\_Input\_Img in = \textcolor{keyword}{new} Ctrl\_Input\_Img();
307 
308         
309         \textcolor{keywordtype}{int} num\_i\_blocks;
310         \textcolor{keywordflow}{if} (in.getHeight()%8 == 0) num\_i\_blocks = in.getHeight()/8;
311         \textcolor{keywordflow}{else} num\_i\_blocks = in.getHeight()/8 + 1;
312         
313         \textcolor{keywordtype}{int} num\_j\_blocks;
314         \textcolor{keywordflow}{if} (in.getWidth()%8 == 0) num\_j\_blocks = in.getWidth()/8;
315         \textcolor{keywordflow}{else} num\_j\_blocks = in.getWidth()/8 + 1;
316         
317         
318 
319         \hyperlink{classdomini_1_1algorithm_1_1Algorithm_a4de9955411c656325adc391ef570c082}{Output}.\hyperlink{classpersistencia_1_1output_1_1Ctrl__Output_ad4738467c2312b0e079c14003e548dd6}{add2}(in.getWidth(), 32);
320         \hyperlink{classdomini_1_1algorithm_1_1Algorithm_a4de9955411c656325adc391ef570c082}{Output}.\hyperlink{classpersistencia_1_1output_1_1Ctrl__Output_ad4738467c2312b0e079c14003e548dd6}{add2}(in.getHeight(), 32);
321         \hyperlink{classdomini_1_1algorithm_1_1Algorithm_a4de9955411c656325adc391ef570c082}{Output}.\hyperlink{classpersistencia_1_1output_1_1Ctrl__Output_ad4738467c2312b0e079c14003e548dd6}{add2}(in.getMaxVal(), 32);
322         \hyperlink{classdomini_1_1algorithm_1_1Algorithm_a4de9955411c656325adc391ef570c082}{Output}.\hyperlink{classpersistencia_1_1output_1_1Ctrl__Output_ad4738467c2312b0e079c14003e548dd6}{add2}(\hyperlink{classdomini_1_1algorithm_1_1JPEG_ae80176d5ff56e613643db55e21c513da}{quality}, 8);
323 
324         
325 
326         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i\_block = 0; i\_block < num\_i\_blocks; i\_block++)  \{
327 
328             \textcolor{keywordtype}{double}[][][][] inRGB = in.get();
329 
330             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j\_block = 0; j\_block < num\_j\_blocks; j\_block++)  \{
331                 
332                 \textcolor{comment}{//1. Color space transformation}
333                 \textcolor{keywordtype}{double}[][][] YCbCr = \textcolor{keyword}{new} \textcolor{keywordtype}{double}[3][8][8];
334                 \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 8; ++i) \{
335                     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < 8; ++j) \{
336                         \textcolor{keywordtype}{double} r, g, b;
337                         r = inRGB[j\_block][i][j][0]; g = inRGB[j\_block][i][j][1]; b = inRGB[j\_block][i][j][
      2];
338                         \textcolor{keywordtype}{double} y, cb, cr;
339                         \textcolor{comment}{// https://sistenix.com/rgb2ycbcr.html}
340                         \textcolor{comment}{// https://en.wikipedia.org/wiki/YCbCr#ITU-R\_BT.601\_conversion}
341                         y = 16 + (65.738*r + 129.057*g + 25.064*b)/256;
342                         cb = 128 + (-37.945*r - 74.494*g + 112.439*b)/256;
343                         cr = 128 + (112.439*r - 94.154*g - 18.285*b)/256;
344                         YCbCr[0][i][j] = y; YCbCr[1][i][j] = cb; YCbCr[2][i][j] = cr;
345                     \}
346                 \}
347                 
348                 \textcolor{keywordtype}{int}[][][] outYCbCr = \textcolor{keyword}{new} \textcolor{keywordtype}{int}[8][8][3];
349                 \textcolor{comment}{//ArrayList<Byte[]> ret = new ArrayList<Byte[]>();}
350                         
351                 \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} k = 0; k < 3; ++k) \{
352                     
353                     \textcolor{comment}{//4. Discrete cosnie transform}
354                     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < 8; ++i) \{
355                         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < 8; ++j) \{
356                             YCbCr[k][i][j] -= 128;
357                         \}
358                     \}
359                     \hyperlink{classdomini_1_1algorithm_1_1JPEG_a367e6d1e6543bf3d8c847aae36f4b6bf}{discrete\_cosine\_transform}(YCbCr[k]);
360                     
361                     \textcolor{comment}{//5. Quantization}
362                     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < 8; ++i) \{
363                         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < 8; ++j) \{
364                             outYCbCr[i][j][k] = \hyperlink{classdomini_1_1algorithm_1_1JPEG_aa9c52789d61d5eebdeb13ee39f8e817d}{round}(YCbCr[k][i][j] / 
      \hyperlink{classdomini_1_1algorithm_1_1JPEG_a7c95eb140dbe185a31b402d48ec17a66}{quantization\_matrix}[i][j]);
365                         \}
366                     \}
367 
368                     \textcolor{comment}{//6. Entropy coding}
369                     \textcolor{keywordtype}{int} zeros = 0;
370                     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} aux = 0; aux < 64; ++aux) \{
371                         \textcolor{keywordtype}{int} x = outYCbCr[\hyperlink{classdomini_1_1algorithm_1_1JPEG_a7d3829cbffd758c087341a8da13dd2ca}{zigZag\_X}[aux]][\hyperlink{classdomini_1_1algorithm_1_1JPEG_ad886d8aa00a40cb151b446534f0d1bcc}{zigZag\_Y}[aux]][k];
372                         \textcolor{keywordflow}{if} (x == 0) \{
373                             zeros++;
374                         \} \textcolor{keywordflow}{else} \{
375                             \textcolor{keywordflow}{while} (zeros >= 16) \{
376                                 \hyperlink{classdomini_1_1algorithm_1_1Algorithm_a4de9955411c656325adc391ef570c082}{Output}.\hyperlink{classpersistencia_1_1output_1_1Ctrl__Output_ad4738467c2312b0e079c14003e548dd6}{add2}(\hyperlink{classdomini_1_1algorithm_1_1JPEG_aacc6445baa7819e3f9139ffb78e0b8f4}{huff}.getCode(0x0F0), 
      \hyperlink{classdomini_1_1algorithm_1_1JPEG_aacc6445baa7819e3f9139ffb78e0b8f4}{huff}.getSize(0x0F0));
377                                 zeros -= 16;
378                             \}
379                             \textcolor{keywordtype}{int} by = \hyperlink{classdomini_1_1algorithm_1_1JPEG_a0f897c6c525d81551539df1eb8db7e12}{get\_entropy1\_code}(zeros, 
      \hyperlink{classdomini_1_1algorithm_1_1JPEG_aa9bc9bee7181efee254be843e23ee2c6}{get\_entropy2\_size}(x));
380                             \hyperlink{classdomini_1_1algorithm_1_1Algorithm_a4de9955411c656325adc391ef570c082}{Output}.\hyperlink{classpersistencia_1_1output_1_1Ctrl__Output_ad4738467c2312b0e079c14003e548dd6}{add2}(\hyperlink{classdomini_1_1algorithm_1_1JPEG_aacc6445baa7819e3f9139ffb78e0b8f4}{huff}.getCode(by), \hyperlink{classdomini_1_1algorithm_1_1JPEG_aacc6445baa7819e3f9139ffb78e0b8f4}{huff}.getSize(by));
381                             zeros = 0;
382                             \hyperlink{classdomini_1_1algorithm_1_1Algorithm_a4de9955411c656325adc391ef570c082}{Output}.\hyperlink{classpersistencia_1_1output_1_1Ctrl__Output_ad4738467c2312b0e079c14003e548dd6}{add2}(\hyperlink{classdomini_1_1algorithm_1_1JPEG_a0ccbcda5311dc96a30e5cb7f2a5b95b5}{get\_entropy2\_code}(x), 
      \hyperlink{classdomini_1_1algorithm_1_1JPEG_aa9bc9bee7181efee254be843e23ee2c6}{get\_entropy2\_size}(x));
383                             
384                         \}
385                     \}
386                     \hyperlink{classdomini_1_1algorithm_1_1Algorithm_a4de9955411c656325adc391ef570c082}{Output}.\hyperlink{classpersistencia_1_1output_1_1Ctrl__Output_ad4738467c2312b0e079c14003e548dd6}{add2}(\hyperlink{classdomini_1_1algorithm_1_1JPEG_aacc6445baa7819e3f9139ffb78e0b8f4}{huff}.getCode(0), \hyperlink{classdomini_1_1algorithm_1_1JPEG_aacc6445baa7819e3f9139ffb78e0b8f4}{huff}.getSize(0));
387 
388                 \}
389             \}
390         \}
391 
392         
393     \}
\end{DoxyCode}
\mbox{\Hypertarget{classdomini_1_1algorithm_1_1JPEG_accca347e84e41b254d1f4a7bbdf2201a}\label{classdomini_1_1algorithm_1_1JPEG_accca347e84e41b254d1f4a7bbdf2201a}} 
\index{domini\+::algorithm\+::\+J\+P\+EG@{domini\+::algorithm\+::\+J\+P\+EG}!Decompressor@{Decompressor}}
\index{Decompressor@{Decompressor}!domini\+::algorithm\+::\+J\+P\+EG@{domini\+::algorithm\+::\+J\+P\+EG}}
\subsubsection{\texorpdfstring{Decompressor()}{Decompressor()}}
{\footnotesize\ttfamily public void domini.\+algorithm.\+J\+P\+E\+G.\+Decompressor (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Desomprimim una imatge amb l\textquotesingle{}algoritme \hyperlink{classdomini_1_1algorithm_1_1JPEG}{J\+P\+EG}. 


\begin{DoxyCode}
400                                \{
401 
402         \hyperlink{classdomini_1_1algorithm_1_1Algorithm_a6b738342cc7169893fa60d593f5a13db}{checkDecompressor}();
403         Ctrl\_Input\_JPEG in = \textcolor{keyword}{new} Ctrl\_Input\_JPEG();
404 
405         \textcolor{keywordtype}{int} num\_i\_blocks;
406         \textcolor{keywordflow}{if} (in.getHeight()%8 == 0) num\_i\_blocks = in.getHeight()/8;
407         \textcolor{keywordflow}{else} num\_i\_blocks = in.getHeight()/8 + 1;
408         
409         \textcolor{keywordtype}{int} num\_j\_blocks;
410         \textcolor{keywordflow}{if} (in.getWidth()%8 == 0) num\_j\_blocks = in.getWidth()/8;
411         \textcolor{keywordflow}{else} num\_j\_blocks = in.getWidth()/8 + 1;
412 
413 
414         \hyperlink{classdomini_1_1algorithm_1_1JPEG_ae80176d5ff56e613643db55e21c513da}{quality} = in.get(8);
415         \hyperlink{classdomini_1_1algorithm_1_1JPEG_a860d6166ef8edc40b0ffb61942589e5d}{resetQuality}(\hyperlink{classdomini_1_1algorithm_1_1JPEG_ae80176d5ff56e613643db55e21c513da}{quality});
416 
417         \hyperlink{classdomini_1_1algorithm_1_1Algorithm_a4de9955411c656325adc391ef570c082}{Output} = \textcolor{keyword}{new} Ctrl\_Output\_Img(in.getWidth(), in.getHeight(), in.getMaxVal());
418 
419         \textcolor{comment}{//int it = 0;}
420 
421         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i\_block = 0; i\_block < num\_i\_blocks; i\_block++)  \{
422 
423             \textcolor{keywordtype}{double}[][][][] outRGB = \textcolor{keyword}{new} \textcolor{keywordtype}{double}[num\_j\_blocks][8][8][3];
424             
425             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j\_block = 0; j\_block < num\_j\_blocks; j\_block++)  \{
426 
427                 \textcolor{keywordtype}{int}[][][] inYCbCr = \textcolor{keyword}{new} \textcolor{keywordtype}{int}[8][8][3];
428                 \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 8; ++i) \{
429                     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < 8; ++j) \{
430                         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} k = 0; k < 3; ++k) inYCbCr[i][j][k] = 0;
431                     \}
432                 \}
433                 
434                 \textcolor{keywordtype}{double}[][][] YCbCr = \textcolor{keyword}{new} \textcolor{keywordtype}{double}[3][8][8];
435 
436                 
437                 \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} k = 0; k < 3; ++k) \{
438                     \textcolor{comment}{//6. Entropy coding}
439                     \textcolor{keywordtype}{int} zz = 0;
440                     \textcolor{keywordflow}{while} (\textcolor{keyword}{true}) \{
441 
442                         \textcolor{keywordtype}{int} found;
443                         \textcolor{keywordflow}{while} ((found = \hyperlink{classdomini_1_1algorithm_1_1JPEG_aacc6445baa7819e3f9139ffb78e0b8f4}{huff}.searchSymbol(in.get(1))) == 0)
444                         \textcolor{keywordflow}{if} (found == -1) \textcolor{keywordflow}{throw} \textcolor{keyword}{new} IllegalArgumentException(\textcolor{stringliteral}{"Huffman code not found"});
445                         
446                         \textcolor{keywordtype}{int} by = \hyperlink{classdomini_1_1algorithm_1_1JPEG_aacc6445baa7819e3f9139ffb78e0b8f4}{huff}.getFoundSymbol();
447                         \textcolor{keywordtype}{int} size = \hyperlink{classdomini_1_1algorithm_1_1JPEG_a8d1005fb7833d36a064afb1c5e15bbd3}{get\_size\_from\_entropy1}(by);
448 
449                         \textcolor{keywordflow}{if} (by == 0x00) \textcolor{keywordflow}{break};
450                         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (by == 0x0F0) \{
451                             zz += 16;
452                         \}
453                         \textcolor{keywordflow}{else} \{
454                             zz += \hyperlink{classdomini_1_1algorithm_1_1JPEG_ac58cb434a7acfd90fc8e548fd7c00ae2}{get\_runlength\_from\_entropy1}(by);
455                             \textcolor{keywordflow}{if} (zz >= 64) \textcolor{keywordflow}{throw} \textcolor{keyword}{new} IllegalArgumentException(\textcolor{stringliteral}{"Entropy coding failed"});
456                             \textcolor{keywordtype}{int} code = in.get(size);
457                             \textcolor{keywordtype}{int} x = \hyperlink{classdomini_1_1algorithm_1_1JPEG_a41c69fe2e29999dd17a555859df22530}{get\_value\_from\_entropy2}(code, size);
458                             inYCbCr[\hyperlink{classdomini_1_1algorithm_1_1JPEG_a7d3829cbffd758c087341a8da13dd2ca}{zigZag\_X}[zz]][\hyperlink{classdomini_1_1algorithm_1_1JPEG_ad886d8aa00a40cb151b446534f0d1bcc}{zigZag\_Y}[zz]][k] = x;
459                             zz++;
460                         \}
461                     \}
462 
463                     \textcolor{comment}{//5. Quantization}
464                     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 8; ++i) \{
465                         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < 8; ++j) \{
466                             YCbCr[k][i][j] = inYCbCr[i][j][k] * 
      \hyperlink{classdomini_1_1algorithm_1_1JPEG_a7c95eb140dbe185a31b402d48ec17a66}{quantization\_matrix}[i][j];
467                         \}
468                     \}
469 
470                     \textcolor{comment}{//4. Discrete cosnie transform}
471                     \hyperlink{classdomini_1_1algorithm_1_1JPEG_a3a6e16b0ee34746e4b0118ed9107bd75}{inverse\_discrete\_cosine\_transform}(YCbCr[k]);
472                     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < 8; ++i) \{
473                         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < 8; ++j) \{
474                             YCbCr[k][i][j] += 128;
475                         \}
476                     \}
477 
478                 \}
479 
480                 \textcolor{comment}{//1. Color space transformation}
481                 \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 8; ++i) \{
482                     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < 8; ++j) \{
483                         \textcolor{keywordtype}{double} y, cb, cr;
484                         y = YCbCr[0][i][j]; cb = YCbCr[1][i][j]; cr = YCbCr[2][i][j];
485                         \textcolor{keywordtype}{double} r, g, b;
486                         \textcolor{comment}{// https://en.wikipedia.org/wiki/YCbCr#ITU-R\_BT.601\_conversion}
487                         r = 255./219.*(y-16) + 255./224.*1.402*(cr-128.);
488                         g = 255./219.*(y-16) + 255./224.*(1.772*0.114/0.587*(cb-128) - 1.402*0.299/0.587*(
      cr-128));
489                         b = 255./219.*(y-16) + 255./224.*1.772*(cb-128);
490                         r = \hyperlink{classdomini_1_1algorithm_1_1JPEG_af86bdbb6b6f5671abff6bc6bd5f6349d}{force255}(r); g = \hyperlink{classdomini_1_1algorithm_1_1JPEG_af86bdbb6b6f5671abff6bc6bd5f6349d}{force255}(g); b = 
      \hyperlink{classdomini_1_1algorithm_1_1JPEG_af86bdbb6b6f5671abff6bc6bd5f6349d}{force255}(b);
491                         
492                         outRGB[j\_block][i][j][0] = r; g = outRGB[j\_block][i][j][1] = g; outRGB[j\_block][i][
      j][2] = b;
493                     \}
494                 \}
495             \}
496 
497             ((Ctrl\_Output\_Img)\hyperlink{classdomini_1_1algorithm_1_1Algorithm_a4de9955411c656325adc391ef570c082}{Output}).add(outRGB);
498         \}
499 
500     \}
\end{DoxyCode}
\mbox{\Hypertarget{classdomini_1_1algorithm_1_1JPEG_a367e6d1e6543bf3d8c847aae36f4b6bf}\label{classdomini_1_1algorithm_1_1JPEG_a367e6d1e6543bf3d8c847aae36f4b6bf}} 
\index{domini\+::algorithm\+::\+J\+P\+EG@{domini\+::algorithm\+::\+J\+P\+EG}!discrete\+\_\+cosine\+\_\+transform@{discrete\+\_\+cosine\+\_\+transform}}
\index{discrete\+\_\+cosine\+\_\+transform@{discrete\+\_\+cosine\+\_\+transform}!domini\+::algorithm\+::\+J\+P\+EG@{domini\+::algorithm\+::\+J\+P\+EG}}
\subsubsection{\texorpdfstring{discrete\+\_\+cosine\+\_\+transform()}{discrete\_cosine\_transform()}}
{\footnotesize\ttfamily private static void domini.\+algorithm.\+J\+P\+E\+G.\+discrete\+\_\+cosine\+\_\+transform (\begin{DoxyParamCaption}\item[{double}]{mat1\mbox{[}$\,$\mbox{]}\mbox{[}$\,$\mbox{]} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}, {\ttfamily [private]}}



aplica discrete cosine transform (D\+CT) a una matriu 8x8 


\begin{DoxyParams}{Parameters}
{\em mat1} & és la matriu 8x8 a la qual s\textquotesingle{}aplica D\+CT \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
185                                                                    \{
186         \textcolor{comment}{//int n = 8;}
187         \textcolor{comment}{//int m = 8;}
188         
189         \textcolor{keywordtype}{double}[][] mat2 = \textcolor{keyword}{new} \textcolor{keywordtype}{double}[8][8];
190 
191         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} u = 0; u < 8; u++) \{
192             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} v = 0; v < 8; ++v) \{
193 
194                 \textcolor{keywordtype}{double} sum = 0;
195                 \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} x = 0; x < 8; ++x) \{ 
196                     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} y = 0; y < 8; ++y)  \{ 
197                         sum += mat1[x][y] *  
198                                Math.cos((2*x + 1) * u * Math.PI / (16.0)) *  
199                                Math.cos((2*y + 1) * v * Math.PI / (16.0)); 
200                     \} 
201                 \}
202                 mat2[u][v] = (1.0/4.0) * \hyperlink{classdomini_1_1algorithm_1_1JPEG_a058b0ee7eb44bbaec4078b5fc32c5107}{alpha}(u) * \hyperlink{classdomini_1_1algorithm_1_1JPEG_a058b0ee7eb44bbaec4078b5fc32c5107}{alpha}(v) * sum;
203             \}
204         \}
205 
206         
207 
208         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} x = 0; x < 8; ++x) \{
209             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} y = 0; y < 8; ++y) \{ 
210                 mat1[x][y] = mat2[x][y];
211             \}
212         \}
213     \}
\end{DoxyCode}
\mbox{\Hypertarget{classdomini_1_1algorithm_1_1JPEG_af86bdbb6b6f5671abff6bc6bd5f6349d}\label{classdomini_1_1algorithm_1_1JPEG_af86bdbb6b6f5671abff6bc6bd5f6349d}} 
\index{domini\+::algorithm\+::\+J\+P\+EG@{domini\+::algorithm\+::\+J\+P\+EG}!force255@{force255}}
\index{force255@{force255}!domini\+::algorithm\+::\+J\+P\+EG@{domini\+::algorithm\+::\+J\+P\+EG}}
\subsubsection{\texorpdfstring{force255()}{force255()}}
{\footnotesize\ttfamily private double domini.\+algorithm.\+J\+P\+E\+G.\+force255 (\begin{DoxyParamCaption}\item[{double}]{x }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}, {\ttfamily [private]}}



és la funcí alfa de D\+CT. 


\begin{DoxyParams}{Parameters}
{\em x} & és un real \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
el real més proper a x de l\textquotesingle{}interval \mbox{[}0..255\mbox{]} 
\end{DoxyReturn}

\begin{DoxyCode}
165                                              \{
166         \textcolor{keywordflow}{if} (x < 0) \textcolor{keywordflow}{return} 0;
167         \textcolor{keywordflow}{if} (x > 255) \textcolor{keywordflow}{return} 255;
168         \textcolor{keywordflow}{return} x;
169     \}
\end{DoxyCode}
\mbox{\Hypertarget{classdomini_1_1algorithm_1_1JPEG_a0f897c6c525d81551539df1eb8db7e12}\label{classdomini_1_1algorithm_1_1JPEG_a0f897c6c525d81551539df1eb8db7e12}} 
\index{domini\+::algorithm\+::\+J\+P\+EG@{domini\+::algorithm\+::\+J\+P\+EG}!get\+\_\+entropy1\+\_\+code@{get\+\_\+entropy1\+\_\+code}}
\index{get\+\_\+entropy1\+\_\+code@{get\+\_\+entropy1\+\_\+code}!domini\+::algorithm\+::\+J\+P\+EG@{domini\+::algorithm\+::\+J\+P\+EG}}
\subsubsection{\texorpdfstring{get\+\_\+entropy1\+\_\+code()}{get\_entropy1\_code()}}
{\footnotesize\ttfamily private static int domini.\+algorithm.\+J\+P\+E\+G.\+get\+\_\+entropy1\+\_\+code (\begin{DoxyParamCaption}\item[{int}]{runlength,  }\item[{int}]{size }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}, {\ttfamily [private]}}



codifica runlength i size en el simbol1 de Entropy Coding 


\begin{DoxyCode}
252                                                                   \{
253         \textcolor{keywordflow}{return} ((runlength<<4) + size);
254     \}
\end{DoxyCode}
\mbox{\Hypertarget{classdomini_1_1algorithm_1_1JPEG_a0ccbcda5311dc96a30e5cb7f2a5b95b5}\label{classdomini_1_1algorithm_1_1JPEG_a0ccbcda5311dc96a30e5cb7f2a5b95b5}} 
\index{domini\+::algorithm\+::\+J\+P\+EG@{domini\+::algorithm\+::\+J\+P\+EG}!get\+\_\+entropy2\+\_\+code@{get\+\_\+entropy2\+\_\+code}}
\index{get\+\_\+entropy2\+\_\+code@{get\+\_\+entropy2\+\_\+code}!domini\+::algorithm\+::\+J\+P\+EG@{domini\+::algorithm\+::\+J\+P\+EG}}
\subsubsection{\texorpdfstring{get\+\_\+entropy2\+\_\+code()}{get\_entropy2\_code()}}
{\footnotesize\ttfamily private static int domini.\+algorithm.\+J\+P\+E\+G.\+get\+\_\+entropy2\+\_\+code (\begin{DoxyParamCaption}\item[{int}]{value }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}, {\ttfamily [private]}}



retorna la codifiacació en el simbol2 de Entropy Coding d\textquotesingle{}un cert valor 


\begin{DoxyCode}
282                                                     \{
283         \textcolor{keywordflow}{if} (value < 0) \textcolor{keywordflow}{return} ~(-value);
284         \textcolor{keywordflow}{return} value;
285     \}
\end{DoxyCode}
\mbox{\Hypertarget{classdomini_1_1algorithm_1_1JPEG_aa9bc9bee7181efee254be843e23ee2c6}\label{classdomini_1_1algorithm_1_1JPEG_aa9bc9bee7181efee254be843e23ee2c6}} 
\index{domini\+::algorithm\+::\+J\+P\+EG@{domini\+::algorithm\+::\+J\+P\+EG}!get\+\_\+entropy2\+\_\+size@{get\+\_\+entropy2\+\_\+size}}
\index{get\+\_\+entropy2\+\_\+size@{get\+\_\+entropy2\+\_\+size}!domini\+::algorithm\+::\+J\+P\+EG@{domini\+::algorithm\+::\+J\+P\+EG}}
\subsubsection{\texorpdfstring{get\+\_\+entropy2\+\_\+size()}{get\_entropy2\_size()}}
{\footnotesize\ttfamily private static int domini.\+algorithm.\+J\+P\+E\+G.\+get\+\_\+entropy2\+\_\+size (\begin{DoxyParamCaption}\item[{int}]{value }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}, {\ttfamily [private]}}



codifica value en el symbol2 de Entropy Coding i en retorna la mida 


\begin{DoxyCode}
273                                                     \{
274         \textcolor{keywordflow}{if} (value == 0) \textcolor{keywordflow}{return} 0;
275         \textcolor{keywordflow}{if} (value < 0) \textcolor{keywordflow}{return} \hyperlink{classdomini_1_1algorithm_1_1JPEG_aa9bc9bee7181efee254be843e23ee2c6}{get\_entropy2\_size}(-value);
276         \textcolor{keywordflow}{return} 1 + \hyperlink{classdomini_1_1algorithm_1_1JPEG_aa9bc9bee7181efee254be843e23ee2c6}{get\_entropy2\_size}(value / 2);
277     \}
\end{DoxyCode}
\mbox{\Hypertarget{classdomini_1_1algorithm_1_1JPEG_ac58cb434a7acfd90fc8e548fd7c00ae2}\label{classdomini_1_1algorithm_1_1JPEG_ac58cb434a7acfd90fc8e548fd7c00ae2}} 
\index{domini\+::algorithm\+::\+J\+P\+EG@{domini\+::algorithm\+::\+J\+P\+EG}!get\+\_\+runlength\+\_\+from\+\_\+entropy1@{get\+\_\+runlength\+\_\+from\+\_\+entropy1}}
\index{get\+\_\+runlength\+\_\+from\+\_\+entropy1@{get\+\_\+runlength\+\_\+from\+\_\+entropy1}!domini\+::algorithm\+::\+J\+P\+EG@{domini\+::algorithm\+::\+J\+P\+EG}}
\subsubsection{\texorpdfstring{get\+\_\+runlength\+\_\+from\+\_\+entropy1()}{get\_runlength\_from\_entropy1()}}
{\footnotesize\ttfamily private static int domini.\+algorithm.\+J\+P\+E\+G.\+get\+\_\+runlength\+\_\+from\+\_\+entropy1 (\begin{DoxyParamCaption}\item[{int}]{code }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}, {\ttfamily [private]}}



retorna el runlength codificat en un simbol1 de Entropy Coding 

retorna la mida codificada en un simbol1 de Entropy Coding 
\begin{DoxyCode}
259                                                              \{
260         \textcolor{keywordflow}{return} (code >> 4) & 0x000F;
261     \}
\end{DoxyCode}
\mbox{\Hypertarget{classdomini_1_1algorithm_1_1JPEG_a8d1005fb7833d36a064afb1c5e15bbd3}\label{classdomini_1_1algorithm_1_1JPEG_a8d1005fb7833d36a064afb1c5e15bbd3}} 
\index{domini\+::algorithm\+::\+J\+P\+EG@{domini\+::algorithm\+::\+J\+P\+EG}!get\+\_\+size\+\_\+from\+\_\+entropy1@{get\+\_\+size\+\_\+from\+\_\+entropy1}}
\index{get\+\_\+size\+\_\+from\+\_\+entropy1@{get\+\_\+size\+\_\+from\+\_\+entropy1}!domini\+::algorithm\+::\+J\+P\+EG@{domini\+::algorithm\+::\+J\+P\+EG}}
\subsubsection{\texorpdfstring{get\+\_\+size\+\_\+from\+\_\+entropy1()}{get\_size\_from\_entropy1()}}
{\footnotesize\ttfamily static int domini.\+algorithm.\+J\+P\+E\+G.\+get\+\_\+size\+\_\+from\+\_\+entropy1 (\begin{DoxyParamCaption}\item[{int}]{code }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}, {\ttfamily [private]}}


\begin{DoxyCode}
266                                                         \{
267         \textcolor{keywordflow}{return} code & 0x000F;
268     \}
\end{DoxyCode}
\mbox{\Hypertarget{classdomini_1_1algorithm_1_1JPEG_a41c69fe2e29999dd17a555859df22530}\label{classdomini_1_1algorithm_1_1JPEG_a41c69fe2e29999dd17a555859df22530}} 
\index{domini\+::algorithm\+::\+J\+P\+EG@{domini\+::algorithm\+::\+J\+P\+EG}!get\+\_\+value\+\_\+from\+\_\+entropy2@{get\+\_\+value\+\_\+from\+\_\+entropy2}}
\index{get\+\_\+value\+\_\+from\+\_\+entropy2@{get\+\_\+value\+\_\+from\+\_\+entropy2}!domini\+::algorithm\+::\+J\+P\+EG@{domini\+::algorithm\+::\+J\+P\+EG}}
\subsubsection{\texorpdfstring{get\+\_\+value\+\_\+from\+\_\+entropy2()}{get\_value\_from\_entropy2()}}
{\footnotesize\ttfamily private static int domini.\+algorithm.\+J\+P\+E\+G.\+get\+\_\+value\+\_\+from\+\_\+entropy2 (\begin{DoxyParamCaption}\item[{int}]{code,  }\item[{int}]{size }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}, {\ttfamily [private]}}



retorna el valor codificat en un codi d\textquotesingle{}una determinada mida 


\begin{DoxyCode}
290                                                                    \{
291         \textcolor{keywordflow}{if} (size == 0) \textcolor{keywordflow}{return} 0;
292         \textcolor{keywordflow}{if} (((code >> (size-1)) & 1) == 0) \textcolor{keywordflow}{return} -(~(code | (-1 << size)));
293         \textcolor{keywordflow}{return} code;
294     \}
\end{DoxyCode}
\mbox{\Hypertarget{classdomini_1_1algorithm_1_1JPEG_a3a6e16b0ee34746e4b0118ed9107bd75}\label{classdomini_1_1algorithm_1_1JPEG_a3a6e16b0ee34746e4b0118ed9107bd75}} 
\index{domini\+::algorithm\+::\+J\+P\+EG@{domini\+::algorithm\+::\+J\+P\+EG}!inverse\+\_\+discrete\+\_\+cosine\+\_\+transform@{inverse\+\_\+discrete\+\_\+cosine\+\_\+transform}}
\index{inverse\+\_\+discrete\+\_\+cosine\+\_\+transform@{inverse\+\_\+discrete\+\_\+cosine\+\_\+transform}!domini\+::algorithm\+::\+J\+P\+EG@{domini\+::algorithm\+::\+J\+P\+EG}}
\subsubsection{\texorpdfstring{inverse\+\_\+discrete\+\_\+cosine\+\_\+transform()}{inverse\_discrete\_cosine\_transform()}}
{\footnotesize\ttfamily private static void domini.\+algorithm.\+J\+P\+E\+G.\+inverse\+\_\+discrete\+\_\+cosine\+\_\+transform (\begin{DoxyParamCaption}\item[{double}]{mat1\mbox{[}$\,$\mbox{]}\mbox{[}$\,$\mbox{]} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}, {\ttfamily [private]}}



aplica discrete cosine transform (D\+CT) inversa a una matriu 8x8 


\begin{DoxyParams}{Parameters}
{\em mat1} & és la matriu 8x8 a la qual s\textquotesingle{}aplica D\+CT inversa \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
220                                                                            \{
221         \textcolor{comment}{//int n = 8;}
222         \textcolor{comment}{//int m = 8;}
223         
224         \textcolor{keywordtype}{double}[][] mat2 = \textcolor{keyword}{new} \textcolor{keywordtype}{double}[8][8];
225 
226         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} x = 0; x < 8; x++) \{
227             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} y = 0; y < 8; ++y) \{
228 
229                 \textcolor{keywordtype}{double} sum = 0;
230                 \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} u = 0; u < 8; ++u) \{ 
231                     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} v = 0; v < 8; ++v)  \{ 
232                         sum += \hyperlink{classdomini_1_1algorithm_1_1JPEG_a058b0ee7eb44bbaec4078b5fc32c5107}{alpha}(u) * \hyperlink{classdomini_1_1algorithm_1_1JPEG_a058b0ee7eb44bbaec4078b5fc32c5107}{alpha}(v) * 
233                                mat1[u][v] *  
234                                Math.cos((2*x + 1) * u * Math.PI / (16.0)) *  
235                                Math.cos((2*y + 1) * v * Math.PI / (16.0)); 
236                     \} 
237                 \}
238                 mat2[x][y] = (1.0/4.0) * sum;
239             \}
240         \}
241 
242         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} x = 0; x < 8; ++x) \{
243             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} y = 0; y < 8; ++y) \{ 
244                 mat1[x][y] = mat2[x][y];
245             \}
246         \}
247     \}
\end{DoxyCode}
\mbox{\Hypertarget{classdomini_1_1algorithm_1_1JPEG_a860d6166ef8edc40b0ffb61942589e5d}\label{classdomini_1_1algorithm_1_1JPEG_a860d6166ef8edc40b0ffb61942589e5d}} 
\index{domini\+::algorithm\+::\+J\+P\+EG@{domini\+::algorithm\+::\+J\+P\+EG}!reset\+Quality@{reset\+Quality}}
\index{reset\+Quality@{reset\+Quality}!domini\+::algorithm\+::\+J\+P\+EG@{domini\+::algorithm\+::\+J\+P\+EG}}
\subsubsection{\texorpdfstring{reset\+Quality()}{resetQuality()}}
{\footnotesize\ttfamily public void domini.\+algorithm.\+J\+P\+E\+G.\+reset\+Quality (\begin{DoxyParamCaption}\item[{int}]{q }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Construeix la matriu de quantització a partir de la qualitat. 


\begin{DoxyParams}{Parameters}
{\em q} & és un número de 0 a 100 que expressa la qualitat de la compressió/descompressió \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
127                                     \{
128         \textcolor{comment}{//
       https://stackoverflow.com/questions/29215879/how-can-i-generalize-the-quantization-matrix-in-jpeg-compression}
129         \hyperlink{classdomini_1_1algorithm_1_1JPEG_ae80176d5ff56e613643db55e21c513da}{quality} = q;
130         \hyperlink{classdomini_1_1algorithm_1_1JPEG_a7c95eb140dbe185a31b402d48ec17a66}{quantization\_matrix} = \textcolor{keyword}{new} \textcolor{keywordtype}{int}[8][8];
131         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 8; ++i) \{
132             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < 8; ++j) \{
133                 \textcolor{keywordflow}{if} (q == 0) \hyperlink{classdomini_1_1algorithm_1_1JPEG_a7c95eb140dbe185a31b402d48ec17a66}{quantization\_matrix}[i][j] = Integer.MAX\_VALUE;
134                 \textcolor{keywordflow}{else} \{
135                     \textcolor{keywordtype}{double} s;
136                     \textcolor{keywordflow}{if} (q < 50) s = 5000/q;
137                     \textcolor{keywordflow}{else} s = 200 - 2*q;
138 
139                     \textcolor{keywordtype}{double} Tb = (double)\hyperlink{classdomini_1_1algorithm_1_1JPEG_a1f91c0bad6cfd3ac22bec68bc28564c5}{base\_quantization\_matrix}[i][j];
140                     \textcolor{keywordtype}{int} Ts = (int)((s*Tb + 50.0)/100.0);
141                     \textcolor{keywordflow}{if} (Ts == 0) Ts = 1; \textcolor{comment}{// Prevent divide by 0 error}
142                     \hyperlink{classdomini_1_1algorithm_1_1JPEG_a7c95eb140dbe185a31b402d48ec17a66}{quantization\_matrix}[i][j] = Ts;
143                 \}
144 
145             \}
146         \}
147     \}
\end{DoxyCode}
\mbox{\Hypertarget{classdomini_1_1algorithm_1_1JPEG_aa9c52789d61d5eebdeb13ee39f8e817d}\label{classdomini_1_1algorithm_1_1JPEG_aa9c52789d61d5eebdeb13ee39f8e817d}} 
\index{domini\+::algorithm\+::\+J\+P\+EG@{domini\+::algorithm\+::\+J\+P\+EG}!round@{round}}
\index{round@{round}!domini\+::algorithm\+::\+J\+P\+EG@{domini\+::algorithm\+::\+J\+P\+EG}}
\subsubsection{\texorpdfstring{round()}{round()}}
{\footnotesize\ttfamily private static int domini.\+algorithm.\+J\+P\+E\+G.\+round (\begin{DoxyParamCaption}\item[{double}]{x }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}, {\ttfamily [private]}}



Arrodoneix un número real. 


\begin{DoxyParams}{Parameters}
{\em x} & és el real \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
l\textquotesingle{}enter més pròxim a x 
\end{DoxyReturn}

\begin{DoxyCode}
156                                        \{
157         \textcolor{keywordflow}{return} (\textcolor{keywordtype}{int})(x + 0.5);
158     \}
\end{DoxyCode}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{classdomini_1_1algorithm_1_1JPEG_a1f91c0bad6cfd3ac22bec68bc28564c5}\label{classdomini_1_1algorithm_1_1JPEG_a1f91c0bad6cfd3ac22bec68bc28564c5}} 
\index{domini\+::algorithm\+::\+J\+P\+EG@{domini\+::algorithm\+::\+J\+P\+EG}!base\+\_\+quantization\+\_\+matrix@{base\+\_\+quantization\+\_\+matrix}}
\index{base\+\_\+quantization\+\_\+matrix@{base\+\_\+quantization\+\_\+matrix}!domini\+::algorithm\+::\+J\+P\+EG@{domini\+::algorithm\+::\+J\+P\+EG}}
\subsubsection{\texorpdfstring{base\+\_\+quantization\+\_\+matrix}{base\_quantization\_matrix}}
{\footnotesize\ttfamily int \mbox{[}$\,$\mbox{]}\mbox{[}$\,$\mbox{]} domini.\+algorithm.\+J\+P\+E\+G.\+base\+\_\+quantization\+\_\+matrix\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [private]}}

{\bfseries Initial value\+:}
\begin{DoxyCode}
=
    \{
        \{16, 11, 10, 16, 24, 40, 51, 61\},
        \{12, 12, 14, 19, 26, 58, 60, 55\},
        \{14, 13, 16, 24, 40, 57, 69, 56\},
        \{14, 17, 22, 29, 51, 87, 80, 62\},
        \{18, 22, 37, 56, 68, 109, 103, 77\},
        \{24, 35, 55, 64, 81, 104, 113, 92\},
        \{49, 64, 78, 87, 103, 121, 120, 101\},
        \{72, 92, 95, 98, 112, 100, 103, 99\}
    \}
\end{DoxyCode}

\begin{DoxyParams}{Parameters}
{\em base\+\_\+quantization\+\_\+matrix} & és la matriu de quantització per una qualitat 50\% \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{classdomini_1_1algorithm_1_1JPEG_aacc6445baa7819e3f9139ffb78e0b8f4}\label{classdomini_1_1algorithm_1_1JPEG_aacc6445baa7819e3f9139ffb78e0b8f4}} 
\index{domini\+::algorithm\+::\+J\+P\+EG@{domini\+::algorithm\+::\+J\+P\+EG}!huff@{huff}}
\index{huff@{huff}!domini\+::algorithm\+::\+J\+P\+EG@{domini\+::algorithm\+::\+J\+P\+EG}}
\subsubsection{\texorpdfstring{huff}{huff}}
{\footnotesize\ttfamily \hyperlink{classHuffman}{Huffman} domini.\+algorithm.\+J\+P\+E\+G.\+huff\hspace{0.3cm}{\ttfamily [package]}}


\begin{DoxyParams}{Parameters}
{\em huff} & és la codificació de huffman utilitzat a Entropy Conding \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{classdomini_1_1algorithm_1_1JPEG_ae80176d5ff56e613643db55e21c513da}\label{classdomini_1_1algorithm_1_1JPEG_ae80176d5ff56e613643db55e21c513da}} 
\index{domini\+::algorithm\+::\+J\+P\+EG@{domini\+::algorithm\+::\+J\+P\+EG}!quality@{quality}}
\index{quality@{quality}!domini\+::algorithm\+::\+J\+P\+EG@{domini\+::algorithm\+::\+J\+P\+EG}}
\subsubsection{\texorpdfstring{quality}{quality}}
{\footnotesize\ttfamily int domini.\+algorithm.\+J\+P\+E\+G.\+quality\hspace{0.3cm}{\ttfamily [private]}}


\begin{DoxyParams}{Parameters}
{\em q} & és un número de 0 a 100 que expressa la qualitat de la compressió/descompressió \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{classdomini_1_1algorithm_1_1JPEG_a7c95eb140dbe185a31b402d48ec17a66}\label{classdomini_1_1algorithm_1_1JPEG_a7c95eb140dbe185a31b402d48ec17a66}} 
\index{domini\+::algorithm\+::\+J\+P\+EG@{domini\+::algorithm\+::\+J\+P\+EG}!quantization\+\_\+matrix@{quantization\+\_\+matrix}}
\index{quantization\+\_\+matrix@{quantization\+\_\+matrix}!domini\+::algorithm\+::\+J\+P\+EG@{domini\+::algorithm\+::\+J\+P\+EG}}
\subsubsection{\texorpdfstring{quantization\+\_\+matrix}{quantization\_matrix}}
{\footnotesize\ttfamily int \mbox{[}$\,$\mbox{]}\mbox{[}$\,$\mbox{]} domini.\+algorithm.\+J\+P\+E\+G.\+quantization\+\_\+matrix = null\hspace{0.3cm}{\ttfamily [private]}}


\begin{DoxyParams}{Parameters}
{\em quantization\+\_\+matrix} & és la matriu de quantització \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{classdomini_1_1algorithm_1_1JPEG_a7d3829cbffd758c087341a8da13dd2ca}\label{classdomini_1_1algorithm_1_1JPEG_a7d3829cbffd758c087341a8da13dd2ca}} 
\index{domini\+::algorithm\+::\+J\+P\+EG@{domini\+::algorithm\+::\+J\+P\+EG}!zig\+Zag\+\_\+X@{zig\+Zag\+\_\+X}}
\index{zig\+Zag\+\_\+X@{zig\+Zag\+\_\+X}!domini\+::algorithm\+::\+J\+P\+EG@{domini\+::algorithm\+::\+J\+P\+EG}}
\subsubsection{\texorpdfstring{zig\+Zag\+\_\+X}{zigZag\_X}}
{\footnotesize\ttfamily int \mbox{[}$\,$\mbox{]} domini.\+algorithm.\+J\+P\+E\+G.\+zig\+Zag\+\_\+X\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [private]}}

{\bfseries Initial value\+:}
\begin{DoxyCode}
= \{
        0,
        0, 1,
        2, 1, 0,
        0, 1, 2, 3, 
        4, 3, 2, 1, 0,
        0, 1, 2, 3, 4, 5,
        6, 5, 4, 3, 2, 1, 0,
        0, 1, 2, 3, 4, 5, 6, 7,
        7, 6, 5, 4, 3, 2, 1,
        2, 3, 4, 5, 6, 7,
        7, 6, 5, 4, 3,
        4, 5, 6, 7, 
        7, 6, 5,
        6, 7,
        7
    \}
\end{DoxyCode}

\begin{DoxyParams}{Parameters}
{\em zig\+Zag\+\_\+\+X\mbox{[}i\mbox{]}} & és la fila que es cnsulta a la ièssima iteració d\textquotesingle{}un recorregut en zigzag d\textquotesingle{}una matriu 8x8 \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{classdomini_1_1algorithm_1_1JPEG_ad886d8aa00a40cb151b446534f0d1bcc}\label{classdomini_1_1algorithm_1_1JPEG_ad886d8aa00a40cb151b446534f0d1bcc}} 
\index{domini\+::algorithm\+::\+J\+P\+EG@{domini\+::algorithm\+::\+J\+P\+EG}!zig\+Zag\+\_\+Y@{zig\+Zag\+\_\+Y}}
\index{zig\+Zag\+\_\+Y@{zig\+Zag\+\_\+Y}!domini\+::algorithm\+::\+J\+P\+EG@{domini\+::algorithm\+::\+J\+P\+EG}}
\subsubsection{\texorpdfstring{zig\+Zag\+\_\+Y}{zigZag\_Y}}
{\footnotesize\ttfamily int \mbox{[}$\,$\mbox{]} domini.\+algorithm.\+J\+P\+E\+G.\+zig\+Zag\+\_\+Y\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [private]}}

{\bfseries Initial value\+:}
\begin{DoxyCode}
= \{
        0,
        1, 0,
        0, 1, 2,
        3, 2, 1, 0,
        0, 1, 2, 3, 4,
        5, 4, 3, 2, 1, 0,
        0, 1, 2, 3, 4, 5, 6,
        7, 6, 5, 4, 3, 2, 1, 0,
        1, 2, 3, 4, 5, 6, 7,
        7, 6, 5, 4, 3, 2,
        3, 4, 5, 6, 7,
        7, 6, 5, 4,
        5, 6, 7,
        7, 6,
        7
    \}
\end{DoxyCode}

\begin{DoxyParams}{Parameters}
{\em zig\+Zag\+\_\+\+Y\mbox{[}i\mbox{]}} & és la columna que es cnsulta a la ièssima iteració d\textquotesingle{}un recorregut en zigzag d\textquotesingle{}una matriu 8x8 \\
\hline
\end{DoxyParams}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
src/domini/algorithm/\hyperlink{JPEG_8java}{J\+P\+E\+G.\+java}\end{DoxyCompactItemize}
